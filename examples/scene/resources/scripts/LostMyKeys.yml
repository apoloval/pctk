type: script
compression: none
data:
  language: lua
  code: |
    local pirate1_dialog_props = { pos = {x=60, y=20}, color = ColorMagenta }
    local pirate2_dialog_props = { pos = {x=60, y=50}, color = ColorYellow }

    RoomShow("resources:rooms/Melee")
    ObjectShow("resources:objects/Bucket", "bucket", {
      pos={x=275, y=110}
    })
    ActorShow("guybrush", {
      pos={x=340, y=90},
      dir=DirLeft,
      costume="resources:costumes/Guybrush"
    })
    MusicPlay("resources:audio/OnTheHill")
    SoundPlay("resources:audio/Cricket")
    ActorWalkToPosition("guybrush", {x=290, y=90}).Wait()
    ActorSpeak("guybrush", "Hello, I'm Guybrush Threepwood,\nmighty pirate!").Wait()
    DialogShow("**Oh no! This guy again!**", pirate1_dialog_props)
    ActorWalkToPosition("guybrush", {x=120, y=90}).Wait()
    ActorSpeak("guybrush", "I think I've lost the keys to my boat.").Wait()
    ActorSpeak("guybrush", "Have you seen any keys?", {delay=2000}).Wait()
    DialogShow("Eeerrrr... Nope!", pirate1_dialog_props)
    SleepMillis(2000)

    MusicPlay("resources:audio/GuitarNoodling")
    ActorWalkToPosition("guybrush", {x=120, y=80}).Wait()
    ActorSpeak("guybrush", "Where can I find the keys?", {delay=1000}).Wait()
    ActorWalkToPosition("guybrush", {x=120, y=90}).Wait()
    ActorSpeak("guybrush", "Ooooook...").Wait()
    SleepMillis(2000)
    ActorStand("guybrush", {dir = DirRight}).Wait()
    SleepMillis(2000)
    ActorSpeak("guybrush", "Ok, I will try the Scumm bar.").Wait()
    ActorStand("guybrush", {dir = DirLeft}).Wait()
    ActorSpeak("guybrush", "Thank you guys!").Wait()
    SoundPlay("resources:audio/Cricket")
    ActorWalkToPosition("guybrush", {x=360, y=90}).Wait()

    DialogShow("Oh, Jesus! I though he would\ntell again that stupid\ntale about LeChuck!", pirate1_dialog_props).Wait()
    SleepMillis(5000)
    DialogShow("Who has the keys?", pirate2_dialog_props).Wait()
    SleepMillis(1000)
    DialogShow("Me!", pirate1_dialog_props)

    ActorSelectEgo("guybrush").Wait()
    EnableControlPanel(true)